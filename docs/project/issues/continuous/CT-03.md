# CT-03: Pre-pushでLint/Testを自動実行する

## 1. メタ情報
- **タスクID**: CT-03
- **タイトル**: huskyによるLint/Test自動実行
- **フェーズ**: Continuous
- **カテゴリ**: DX
- **担当**: _(TBD)_
- **ステータス**: Planned
- **関連Issue/PR**: -

## 2. 背景・目的
- 開発者がLint/テストを実行し忘れるとCIで失敗し、手戻りが発生するため、pre-pushフックで自動化する。

## 3. ゴールと非ゴール
- **ゴール**
  - `husky` フックで `npm run lint` / `npm run test` / `ruff` / `pytest` を実行（時間が許す範囲で）。
- **非ゴール**
  - 長時間かかるE2Eテストの実行（CIに任せる）。

## 4. スコープ
- `.husky/pre-push`, `package.json` scripts, backend lintコマンド。

## 5. ステップ
1. 現状の `husky` 設定を確認。
2. pre-pushスクリプトに必要なコマンドを追加（並列/直列を調整）。
3. ドキュメントでオプトアウト方法（環境変数）を記載。

## 6. 成果物
- Husky設定更新PR。

## 7. 依存・考慮
- **考慮事項**: テスト時間が長い場合は `SKIP_PRE_PUSH` 等のフラグを設ける。

## 8. リスク
| リスク | 影響 | 対策 |
| --- | --- | --- |
| コマンドが遅く開発効率低下 | push遅延 | 差分対象のみ実行、並列ツールを使用 |

## 9. テスト
- ローカルで pre-push が動くか確認。

## 10. タイムライン
- 継続（設定後も定期的に見直し）。

## 11. チェックリスト
- [ ] Husky更新
- [ ] ドキュメント追記
- [ ] 動作確認

---
**メモ**: 将来的にバックエンドとフロントで別リポジトリ化する場合、同様の仕組みを移行できるよう設定をモジュール化するとよい。*** End Patch
