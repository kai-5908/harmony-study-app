# PH0-01: WSL2でnpm環境を整備する

## 1. メタ情報
- **タスクID**: PH0-01
- **タイトル**: WSL2でnpm ciを実行して依存を整える
- **フェーズ**: Phase0
- **カテゴリ**: DX
- **担当**: _(TBD)_
- **ステータス**: Planned
- **関連Issue/PR**: - 

## 2. 背景・目的
- フロントエンドのビルドがWindowsネイティブ環境で失敗しているため、WSL2上で確実に `npm run build` を通せる足場を用意する。
- 以降のタスク（ビルド修正、CI整備）を進める前提となる。

## 3. ゴールと非ゴール
- **ゴール**
  - `npm ci` がエラーなく完了し、`node_modules` が整った状態を再現できる。
  - 実行手順・事前条件をドキュメント化する。
- **非ゴール**
  - Windowsネイティブ環境でのビルド成功。
  - CI上での動作確認（別タスク）。

## 4. スコープ詳細
- **対象**: `frontend/` ディレクトリの依存セットアップ。
- **入出力影響**: なし。
- **参照ドキュメント**: `docs/project/development-plan.md` Phase0 セクション。

## 5. 実施ステップ
1. WSL2(Ubuntu)でリポジトリをチェックアウト／更新。
2. `frontend/` で `npm ci` を実行し、ログを取得。
3. エラー発生時は原因を調査し、解決策を試行。
4. 成功したコマンドと注意点をメモ化。
5. 必要に応じて `docs/development/development-guidelines.md` を更新。

## 6. 成果物
- 実行ログまたは手順メモ。
- ドキュメント更新PR（必要なら）。

## 7. 依存関係・ブロッカー
- **前提タスク**: なし。
- **考慮事項**: 社内プロキシ設定やNodeバージョンが影響するか要確認。

## 8. リスクと対策
| リスク | 影響 | 対策 |
| --- | --- | --- |
| Nodeバージョン不一致 | `npm ci` 失敗 | `.nvmrc` / `package.json` の `engines` を確認し、nvmで揃える |
| プロキシ制限 | 依存取得不可 | 事前に必要な環境変数や証明書を確認 |

## 9. テスト・検証計画
- **自動テスト**: なし。
- **手動確認**: `npm run build` を試し、TypeScriptコンパイルが進むことを確認（失敗しても依存問題でないことを示せれば可）。
- **受け入れ基準**: `npm ci` が成功し、手順が共有されている。

## 10. 計測・メトリクス
- 任意: 所要時間、ネットワーク帯域などを記録しておくと参考になる。

## 11. ドキュメント・ナレッジ更新
- `docs/development/development-guidelines.md` にWSL用セットアップ手順を追記予定。

## 12. タイムライン
- **開始予定**: `YYYY-MM-DD`
- **終了予定**: `YYYY-MM-DD`
- **レビュー予定者**: Tech Lead

## 13. チェックリスト
- [ ] `npm ci` 成功ログ取得
- [ ] 失敗時の原因と対処を記録
- [ ] ドキュメント更新
- [ ] レビュー依頼
- [ ] マージ完了

---

**メモ/考慮事項**
- ネットワーク制約がある場合は、Artifactory等の社内レジストリ利用を検討。
