# PH0-03: BrowserRouterへ移行する

## 1. メタ情報
- **タスクID**: PH0-03
- **タイトル**: SPAルーターをBrowserRouterへ変更
- **フェーズ**: Phase0
- **カテゴリ**: Frontend
- **担当**: _(TBD)_
- **ステータス**: Planned
- **関連Issue/PR**: -

## 2. 背景・目的
- 現在 `MemoryRouter` を使用しているため、ブラウザのURLや履歴が連動せず、リロードや共有リンクに支障がある。
- 本番運用を見据えて `BrowserRouter` に切り替え、一般的なSPAとして動作させる。

## 3. ゴールと非ゴール
- **ゴール**
  - アプリ起動時に `BrowserRouter` が利用されている。
  - URL直打ちやリロードで画面が表示される。
- **非ゴール**
  - SSR対応やコード分割などルーティング以外の最適化。

## 4. スコープ詳細
- **対象コード**: `frontend/src/App.tsx` と関連設定（必要なら `vite.config.ts`）。
- **API影響**: なし。
- **参照**: React Router v6 ドキュメント。

## 5. 実施ステップ
1. `MemoryRouter` import を `BrowserRouter` に変更。
2. `basename` が必要か検討（ホスティングパス次第）。
3. `npm run dev` で動作確認し、`/tasks/:id` 直アクセスをテスト。
4. テストコードでRouter差し替えが必要なら修正。

## 6. 成果物
- ルーティング変更PR。
- 動作確認メモまたはスクリーンショット。

## 7. 依存・ブロッカー
- **前提**: PH0-02完了、依存インストール済み。
- **考慮事項**: GitHub Pages等で `BrowserRouter` 利用時はリライトルールが必要。ホスティング戦略が未定の場合、注意点を記載する。

## 8. リスクと対策
| リスク | 影響 | 対策 |
| --- | --- | --- |
| ホスティング環境でルートが404 | 画面遷移不可 | ビルド成果物の配置方法やリライトルールを事前に確認 |

## 9. テスト・検証
- **自動**: `npm run test` (Router差分があれば修正)。
- **手動**: ブラウザで直接URLアクセス、戻る/進む操作。
- **受け入れ基準**: URLに `/tasks/1` などを入力しても表示される。

## 10. 計測
- なし。

## 11. ドキュメント更新
- `README.md` の起動手順にRouter変更が影響する場合は追記。

## 12. タイムライン
- 開始 `YYYY-MM-DD`
- 完了 `YYYY-MM-DD`
- レビュー: Frontendリード

## 13. チェックリスト
- [ ] BrowserRouterへ置換
- [ ] 手動動作確認
- [ ] テスト更新
- [ ] PR提出

---
**メモ**: 今後ルートが増えた際にコード分割を検討するため、`routes.tsx` 等への分離も視野に入れておく。
