# PH1-09: E2Eテストで提出フローを検証する

## 1. メタ情報
- **タスクID**: PH1-09
- **タイトル**: 課題→提出→評価表示のE2Eテスト
- **フェーズ**: Phase1
- **カテゴリ**: DX / QA
- **担当**: _(TBD)_
- **ステータス**: Planned
- **関連Issue/PR**: PH1-04

## 2. 背景・目的
- 重要なユーザーフロー（課題選択→解答送信→結果確認）を自動テストで保証し、回帰を防ぐ。
- PlaywrightまたはCypressを導入し、CIで実行する。

## 3. ゴールと非ゴール
- **ゴール**
  - 最低1本のE2Eテストで提出フローを自動化。
  - CIに統合し、PRごとに実行。
- **非ゴール**
  - 全画面のE2E網羅。

## 4. スコープ詳細
- **対象**: Frontendアプリ（モックAPIまたは実API）。
- **選定**: Playwright推奨（TypeScript連携が良いため）※変更可。

## 5. 実施ステップ
1. テストランナー（Playwright/Cypress）を導入。
2. 提出APIをMSWなどでモックするか、バックエンド実体を起動してテスト。
3. 「課題一覧→詳細→入力→送信→結果表示」のシナリオを記述。
4. GitHub ActionsにE2Eジョブを追加。

## 6. 成果物
- E2Eテストコード。
- CI更新。

## 7. 依存・ブロッカー
- **前提**: PH1-04でUIが出来上がっていること。
- **考慮事項**: バックエンドをテスト中に起動するか、MSWで代替するか決める。

## 8. リスクと対策
| リスク | 影響 | 対策 |
| --- | --- | --- |
| テストが不安定 | CIが赤くなりがち | モックと適切な待機/locator利用 |
| CI時間が長い | スループット低下 | 並列実行や差分テストの活用 |

## 9. テスト・検証
- E2E自体がテスト。ローカルで `npx playwright test` 等を実行。
- 受入: CIでグリーン。

## 10. 計測
- テスト実行時間を記録。

## 11. ドキュメント
- `docs/development/development-guidelines.md` にE2E実行手順を追記。

## 12. タイムライン
- TBD

## 13. チェックリスト
- [ ] テストランナー導入
- [ ] シナリオ実装
- [ ] CI統合
- [ ] PRマージ

---
**考慮事項**: 将来的に複数ブラウザ（Chromium/Firefox/WebKit）で動作確認するか決める。***
