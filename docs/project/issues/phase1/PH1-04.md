# PH1-04: 提出APIとフロントエンドを接続する

## 1. メタ情報
- **タスクID**: PH1-04
- **タイトル**: フロントから課題提出・評価表示を行う
- **フェーズ**: Phase1
- **カテゴリ**: Frontend
- **担当**: _(TBD)_
- **ステータス**: Planned
- **関連Issue/PR**: PH1-03（Backend API）

## 2. 背景・目的
- バックエンドの提出APIが完成しても、フロントから利用できなければ価値を提供できない。
- MVPとして、ユーザーがUI上から解答を送信し、禁則結果を確認できる導線を用意する。

## 3. ゴールと非ゴール
- **ゴール**
  - `HarmonyTaskAPI` に提出メソッドを追加。
  - UI（暫定フォーム）からAPIを呼び出し、結果を画面に表示。
- **非ゴール**
  - 最終的な鍵盤UIや譜面入力の完成（別タスクで改善）。

## 4. スコープ詳細
- **対象コード**: `frontend/src/api/harmonyTaskApi.ts`, `components/harmony-task/` 新規フォーム。
- **API影響**: PH1-03で定義した契約を利用。

## 5. 実施ステップ
1. APIクライアントに `submitTask(taskId, payload)` を追加。
2. 暫定的な入力UI（テキストエリアやJSONアップロードなど）を用意。
3. 送信後に禁則結果リストを表示。失敗時はエラー表示。
4. Vitest/RTLで主要フローをテスト。

## 6. 成果物
- フロント改修PR。
- テスト（APIモックを用いたコンポーネントテスト）。

## 7. 依存・ブロッカー
- **前提**: PH1-03 API公開。
- **考慮事項**: 実際のUI（譜面表示/鍵盤）が未完成のため、暫定的な入力方法でよいがユーザーガイドを記載。

## 8. リスクと対策
| リスク | 影響 | 対策 |
| --- | --- | --- |
| 入力フォーマットが難解 | 利用されない | 簡易テンプレートやモックデータを画面に表示 |
| API契約変更 | フロント対応漏れ | 型定義を共通化（OpenAPI→TypeScript生成を検討） |

## 9. テスト・検証
- `npm run test` で新規テストを実行。
- 手動でUIからAPIを叩き、Networkタブでレスポンスを確認。
- 受入: 成功/失敗ケースがUIで判別できる。

## 10. 計測
- なし。

## 11. ドキュメント
- UIの使い方を `docs/project/development-guidelines.md` か `README.md` に追記。

## 12. タイムライン
- TBD

## 13. チェックリスト
- [ ] APIクライアント更新
- [ ] UI追加
- [ ] テスト追加
- [ ] ドキュメント更新
- [ ] PRマージ

---
**考慮事項**: 将来的にフォームを鍵盤UIへ差し替える際、状態管理（React Query等）を導入するか検討。*** End Patch
