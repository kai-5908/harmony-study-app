# PH1-01: 禁則判定サービスのADR作成

## 1. メタ情報
- **タスクID**: PH1-01
- **タイトル**: 禁則判定サービス設計ADR
- **フェーズ**: Phase1
- **カテゴリ**: Backend / Domain
- **担当**: _(TBD)_
- **ステータス**: Planned
- **関連Issue/PR**: -

## 2. 背景・目的
- 和声課題の評価機能を実装する前に、対象ルールや入出力形式を合意する必要がある。
- ADRとして記録し、今後の仕様変更に備える。

## 3. ゴールと非ゴール
- **ゴール**
  - 禁則判定サービスの責務、データ構造、ルール優先度を明文化。
  - 代替案と採用理由を提示。
- **非ゴール**
  - 実装や詳細アルゴリズムの完成（PH1-02以降）。

## 4. スコープ詳細
- **対象**: `docs/ADR/` 新規ファイル。
- **参照**: `project-charter`, `development-plan`.

## 5. 実施ステップ
1. 既存の禁則ルール要求を収集（PO/音楽ドメイン担当と確認）。
2. 入力データ（音列, MusicXML, MIDI 等）の表現方法を比較。
3. 出力（違反リスト、スコア）案をまとめ、代替案も記述。
4. ADRを執筆しレビューを依頼。

## 6. 成果物
- `docs/ADR/` へのMarkdown。

## 7. 依存・ブロッカー
- **前提**: PH0-06でサービス層の土台があると望ましい。
- **考慮事項**: 音楽理論専門家からの承認が必要。

## 8. リスクと対策
| リスク | 影響 | 対策 |
| --- | --- | --- |
| 仕様が曖昧 | 実装差し戻し | ドメイン担当をレビューアに設定 |
| 入出力形式の変更 | API互換性問題 | バージョニング方針をADRで言及 |

## 9. テスト・検証
- 該当なし（文書レビュー）。

## 10. 計測
- なし。

## 11. ドキュメント
- ADR本体。

## 12. タイムライン
- 開始 `YYYY-MM-DD`
- 終了 `YYYY-MM-DD`
- レビュー: ドメイン担当 + Tech Lead

## 13. チェックリスト
- [ ] ルール一覧作成
- [ ] 入出力案整理
- [ ] ADR執筆
- [ ] レビュー完了
- [ ] マージ

---
**考慮事項**: 不確実な点（例: 音高表現, 転回の扱い, 調性判定）については「要確認事項」としてADRに記載する。*** End Patch
