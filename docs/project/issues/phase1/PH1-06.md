# PH1-06: 譜面レンダリングコンポーネントを実装する

## 1. メタ情報
- **タスクID**: PH1-06
- **タイトル**: 選定ライブラリで課題譜面を表示
- **フェーズ**: Phase1
- **カテゴリ**: Frontend / UX
- **担当**: _(TBD)_
- **ステータス**: Planned
- **関連Issue/PR**: PH1-05（ライブラリ選定）

## 2. 背景・目的
- ライブラリ選定後、課題データの譜面をUI上で視覚化する必要がある。
- 読みやすい五線譜表示によりユーザーが課題内容を即座に理解できるようにする。

## 3. ゴールと非ゴール
- **ゴール**
  - HarmonyTaskDetail等で譜面を描画するコンポーネントを実装。
  - 最低限のズーム/スクロールやレスポンシブ対応を行う。
- **非ゴール**
  - 編集・入力機能（PH1-07以降）。

## 4. スコープ詳細
- **対象コード**: `frontend/src/components/harmony-task/ScoreViewer.tsx`（想定）など。
- **データ形式**: MusicXMLパス or JSONスコア。必要に応じて変換。

## 5. 実施ステップ
1. 選定ライブラリをインストールし、Vite環境で動作確認。
2. HarmonyTaskの `score` 情報を受け取り、描画コンポーネントを作成。
3. 読み込み中/エラー表示を追加。
4. StorybookやVitestでUIテストを準備。

## 6. 成果物
- Reactコンポーネント。
- Storybook (任意) + Vitest。

## 7. 依存・ブロッカー
- **前提**: PH1-05でライブラリ決定。
- **考慮事項**: MusicXMLファイルの配信方法（静的ファイル or API）を検討。

## 8. リスクと対策
| リスク | 影響 | 対策 |
| --- | --- | --- |
| バンドルサイズ増加 | 初期表示が重くなる | Dynamic import や Code splitting を活用 |
| MusicXML解析エラー | 表示不可 | 事前にバリデーション, fallback UI |

## 9. テスト・検証
- Unit: コンポーネントが props を受け取りレンダリングすること。
- 手動: 実際の課題で表示を確認。

## 10. 計測
- 初回描画時間をDevToolsで計測し記録。

## 11. ドキュメント
- `docs/project/development-guidelines.md` に利用ライブラリと注意点を追記。

## 12. タイムライン
- TBD

## 13. チェックリスト
- [ ] ライブラリ導入
- [ ] コンポーネント実装
- [ ] ローディング/エラー状態
- [ ] テスト/Storybook
- [ ] PRマージ

---
**考慮事項**: 将来的に譜面内の小節クリックなどインタラクションを追加する場合、ライブラリのAPI制約を事前に確認。*** End Patch
