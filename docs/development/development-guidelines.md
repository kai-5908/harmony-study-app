# 開発ガイドライン

## 設計プロセス

### 1. ADR（Architecture Decision Record）
- 新機能の実装前に必ずADRを作成
- `docs/ADR/` 配下に配置
- テンプレート: `docs/adr_template.md` を使用
- 以下の項目を必ず含める：
  - コンテキストと要件
  - 決定事項と根拠
  - 代替案の検討
  - 影響範囲
  - 妥協点・技術的負債

### 2. ドメイン知識の文書化
- `docs/domain/` 配下に配置
- 業務知識・用語の定義
- 制約・ルール
- 将来の拡張可能性
- 参考文献・出典

### 3. 言語間の一貫性
- Python/TypeScript間でのモデル定義の同期
- 共通の型定義・バリデーションルール
- コードジェネレータの活用（必要に応じて）
- スキーマ定義の一元管理

## 実装プロセス

### 1. テスト駆動開発（TDD）
- テストファースト原則
- Red-Green-Refactorサイクルの遵守
- テストケースの優先順位：
  1. バリデーションテスト
  2. コアロジックテスト
  3. エッジケーステスト
  4. 異常系テスト

### 2. テストの一貫性
- Python（pytest）とTypeScript（Jest）で同等のテストケース
- テストケース命名規則の統一
- テストデータの共有
- カバレッジ目標：80%以上

### 3. バリデーション
- 入力値の検証（Pydantic, Zod等）
- ビジネスルールの検証
- エラーメッセージの一貫性
- 国際化対応

## レビュープロセス

### 1. プルリクエスト提出前
- [ ] ADRが作成・更新されているか
- [ ] ドメイン知識が文書化されているか
- [ ] テストが十分に書かれているか
- [ ] バリデーションが適切か
- [ ] 両言語で一貫性が保たれているか
- [ ] 将来の拡張性が考慮されているか

### 2. レビュー時の確認事項
- [ ] ADRの内容は適切か
- [ ] テストケースは十分か
- [ ] エッジケースは考慮されているか
- [ ] バリデーションは完全か
- [ ] 言語間の一貫性は保たれているか
- [ ] コードの品質は基準を満たしているか

## コードの品質基準

### 1. テストカバレッジ
- 全体のカバレッジ：80%以上
- 重要なビジネスロジック：100%
- 異常系のテスト：必須

### 2. 静的解析
- Python: ruff, mypy
- TypeScript: ESLint, TypeScript Compiler
- Prettier

### 3. パフォーマンス
- バリデーション処理の効率性
- メモリ使用量の最適化
- 処理時間の目標値設定

## ドキュメント更新プロセス

### 1. ADRの更新
- 重要な決定事項の追加
- 既存の決定の変更・破棄
- 影響範囲の更新

### 2. ドメイン知識の更新
- 新しい概念・ルールの追加
- 既存の定義の明確化・修正
- 参考文献の追加

### 3. ガイドラインの見直し
- 四半期ごとのレビュー
- チームフィードバックの反映
- ベストプラクティスの更新
