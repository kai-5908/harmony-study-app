# 和声課題一覧表示UIの設計

## ステータス
提案中

## コンテキスト
- ユーザーが利用可能な和声課題を一覧表示する機能が必要
- MVPステージでの実装であり、基本的な機能を優先
- 今後の機能拡張（検索・フィルタ等）を見据えた設計が必要
- データモデルとリポジトリ層は既に実装済み

## 決定事項

### 1. コンポーネント構成
```
src/
  components/
    harmony-tasks/
      HarmonyTaskList.tsx       # 一覧表示の親コンポーネント
      HarmonyTaskCard.tsx       # 個々の課題表示用カード
      HarmonyTaskFilters.tsx    # フィルタUI（将来の拡張用）
  hooks/
    useHarmonyTasks.ts         # タスク取得・状態管理用フック
  repositories/
    jsonHarmonyTaskRepository.ts # JSON形式での永続化実装
  types/
    harmony-task.d.ts          # 型定義（既存）
```

### 2. データフロー
1. `HarmonyTaskList`: リストの表示とデータ取得を管理
   - `useHarmonyTasks`フックを使用してデータ取得
   - ローディング状態とエラー処理を管理
   - タスクの一覧をリスト表示

2. `HarmonyTaskCard`: 個々のタスクの表示を担当
   - タイトル、説明、難易度、タグの表示
   - クリック/タップ時の詳細表示への遷移（将来実装）

3. `useHarmonyTasks`: データ取得と状態管理
   - リポジトリからのデータ取得
   - ローディング状態の管理
   - エラーハンドリング
   - キャッシュ（オプション）

### 3. UI/UXデザイン
- レスポンシブグリッドレイアウト採用
  - デスクトップ: 3カラム
  - タブレット: 2カラム
  - モバイル: 1カラム
- カード形式での表示
  - タイトル（または説明の一部）
  - 難易度（色分けで視認性向上）
  - タグ（チップ形式）
- ローディング/エラー状態の表示
  - スケルトンUIでローディング表示
  - エラーメッセージは再試行オプション付き

### 4. エラーハンドリング
- Result型を活用した統一的なエラー処理
- ユーザーフレンドリーなエラーメッセージ
- リトライ機能の実装

### 5. パフォーマンス考慮
- 仮想スクロールの準備（大量データ対応）
- 適切なキャッシュ戦略
- 遅延読み込みの実装

### 6. テスト戦略
1. ユニットテスト
   - コンポーネントの個別テスト
   - カスタムフックのテスト
   - リポジトリ層との統合テスト

2. インテグレーションテスト
   - コンポーネント間の連携
   - データフローの検証

3. スナップショットテスト
   - UIの一貫性確認

## 代替案の検討
1. テーブル形式での表示
   - ✔ データの整理された表示
   - ✖ モバイル対応が困難
   - ✖ 視覚的魅力に欠ける

2. リスト形式での表示
   - ✔ シンプルな実装
   - ✔ モバイルフレンドリー
   - ✖ 情報密度が低い

3. カード形式（採用）
   - ✔ 視覚的に魅力的
   - ✔ レスポンシブ対応が容易
   - ✔ 拡張性が高い
   - ✖ 実装がやや複雑

## 影響範囲
- フロントエンドのみの変更
- 既存のデータモデル・リポジトリ層は再利用
- 新規コンポーネントとカスタムフックの追加

## 技術的負債
- 初期実装では検索・フィルタ機能を省略
- パフォーマンス最適化は基本的なものにとどめる
- アクセシビリティ対応は最小限

## 注意点
- コンポーネントの責務分離を明確に
- 型安全性の確保
- エラー処理の統一性維持
- テスト容易性の確保
